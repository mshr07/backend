{"ast":null,"code":"import _objectSpread from\"/Users/srihemanthreddy/expense-tracker-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{expensesAPI,categoriesAPI}from'../services/api';import Navigation from'./Navigation';import'./ExpenseForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ExpenseForm=()=>{const navigate=useNavigate();const{id}=useParams();const isEditing=!!id;const[formData,setFormData]=useState({name:'',description:'',amount:'',date:new Date().toISOString().split('T')[0],category:''});const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');useEffect(()=>{const fetchData=async()=>{try{const categoriesData=await categoriesAPI.getAll();setCategories(categoriesData);if(isEditing&&id){var _expense$category;const expense=await expensesAPI.getById(parseInt(id));setFormData({name:expense.name,description:expense.description||'',amount:expense.amount,date:expense.date,category:((_expense$category=expense.category)===null||_expense$category===void 0?void 0:_expense$category.toString())||''});}}catch(error){console.error('Error fetching data:',error);setError('Failed to load data');}};fetchData();},[isEditing,id]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const expenseData={name:formData.name,description:formData.description,amount:formData.amount,date:formData.date,category:formData.category?parseInt(formData.category):null};if(isEditing&&id){await expensesAPI.update(parseInt(id),expenseData);}else{await expensesAPI.create(expenseData);}navigate('/dashboard');}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||\"Failed to \".concat(isEditing?'update':'create',\" expense\"));}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"expense-form-page\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(\"div\",{className:\"expense-form-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"expense-form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isEditing?'Edit Expense':'Add New Expense'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"expense-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Expense Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,required:true,disabled:loading,placeholder:\"e.g., Coffee at Starbucks\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"Amount *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"amount\",name:\"amount\",value:formData.amount,onChange:handleChange,required:true,min:\"0\",step:\"0.01\",disabled:loading,placeholder:\"0.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"Date *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",name:\"date\",value:formData.date,onChange:handleChange,required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"category\",name:\"category\",value:formData.category,onChange:handleChange,disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleChange,disabled:loading,rows:3,placeholder:\"Optional notes about this expense\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/dashboard'),className:\"cancel-btn\",disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:loading?isEditing?'Updating...':'Creating...':isEditing?'Update Expense':'Create Expense'})]})]})]})})]});};export default ExpenseForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","expensesAPI","categoriesAPI","Navigation","jsx","_jsx","jsxs","_jsxs","ExpenseForm","navigate","id","isEditing","formData","setFormData","name","description","amount","date","Date","toISOString","split","category","categories","setCategories","loading","setLoading","error","setError","fetchData","categoriesData","getAll","_expense$category","expense","getById","parseInt","toString","console","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","expenseData","update","create","_error$response","_error$response$data","response","data","detail","concat","className","children","onSubmit","htmlFor","type","onChange","required","disabled","placeholder","min","step","map","rows","onClick"],"sources":["/Users/srihemanthreddy/expense-tracker-app/frontend/src/components/ExpenseForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Expense, ExpenseCategory } from '../types';\nimport { expensesAPI, categoriesAPI } from '../services/api';\nimport Navigation from './Navigation';\nimport './ExpenseForm.css';\n\nconst ExpenseForm: React.FC = () => {\n  const navigate = useNavigate();\n  const { id } = useParams<{ id: string }>();\n  const isEditing = !!id;\n\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    amount: '',\n    date: new Date().toISOString().split('T')[0],\n    category: '',\n  });\n  \n  const [categories, setCategories] = useState<ExpenseCategory[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const categoriesData = await categoriesAPI.getAll();\n        setCategories(categoriesData);\n\n        if (isEditing && id) {\n          const expense = await expensesAPI.getById(parseInt(id));\n          setFormData({\n            name: expense.name,\n            description: expense.description || '',\n            amount: expense.amount,\n            date: expense.date,\n            category: expense.category?.toString() || '',\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Failed to load data');\n      }\n    };\n\n    fetchData();\n  }, [isEditing, id]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const expenseData = {\n        name: formData.name,\n        description: formData.description,\n        amount: formData.amount,\n        date: formData.date,\n        category: formData.category ? parseInt(formData.category) : null,\n      };\n\n      if (isEditing && id) {\n        await expensesAPI.update(parseInt(id), expenseData);\n      } else {\n        await expensesAPI.create(expenseData);\n      }\n\n      navigate('/dashboard');\n    } catch (error: any) {\n      setError(error.response?.data?.detail || `Failed to ${isEditing ? 'update' : 'create'} expense`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"expense-form-page\">\n      <Navigation />\n      \n      <div className=\"expense-form-content\">\n        <div className=\"expense-form-container\">\n          <h1>{isEditing ? 'Edit Expense' : 'Add New Expense'}</h1>\n          \n          {error && <div className=\"error-message\">{error}</div>}\n          \n          <form onSubmit={handleSubmit} className=\"expense-form\">\n            <div className=\"form-group\">\n              <label htmlFor=\"name\">Expense Name *</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                required\n                disabled={loading}\n                placeholder=\"e.g., Coffee at Starbucks\"\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"amount\">Amount *</label>\n              <input\n                type=\"number\"\n                id=\"amount\"\n                name=\"amount\"\n                value={formData.amount}\n                onChange={handleChange}\n                required\n                min=\"0\"\n                step=\"0.01\"\n                disabled={loading}\n                placeholder=\"0.00\"\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"date\">Date *</label>\n              <input\n                type=\"date\"\n                id=\"date\"\n                name=\"date\"\n                value={formData.date}\n                onChange={handleChange}\n                required\n                disabled={loading}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"category\">Category</label>\n              <select\n                id=\"category\"\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                disabled={loading}\n              >\n                <option value=\"\">Select a category</option>\n                {categories.map((category) => (\n                  <option key={category.id} value={category.id}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"description\">Description</label>\n              <textarea\n                id=\"description\"\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n                disabled={loading}\n                rows={3}\n                placeholder=\"Optional notes about this expense\"\n              />\n            </div>\n\n            <div className=\"form-actions\">\n              <button\n                type=\"button\"\n                onClick={() => navigate('/dashboard')}\n                className=\"cancel-btn\"\n                disabled={loading}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                className=\"submit-btn\"\n                disabled={loading}\n              >\n                {loading \n                  ? (isEditing ? 'Updating...' : 'Creating...') \n                  : (isEditing ? 'Update Expense' : 'Create Expense')\n                }\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ExpenseForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}